<!DOCTYPE html>
<meta charset="utf-8">
<style>
	.links line {
		stroke: #999;
		stroke-opacity: 0.6;
	}

	.nodes circle {
		stroke: #fff;
		stroke-width: 1.5px;
	}

	text {
		font-family: sans-serif;
		font-size: 10px;
	}
</style>
<svg width="1080" height="800"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

	var svg = d3.select("svg"),
		width = +svg.attr("width"),
		height = +svg.attr("height");

	var color = d3.scaleOrdinal(d3.schemeCategory20);

	var simulation = d3.forceSimulation()
		.force("link", d3.forceLink().id(function (d) { return d.id; }))
		.force("charge", d3.forceManyBody())
		.force("center", d3.forceCenter(width / 2, height / 2));
	let graph = {
		"nodes": [
			{ "id": "Myriel", "group": 1 },
			{ "id": "Napoleon", "group": 1 },
			{ "id": "Mlle.Baptistine", "group": 1 },
			{ "id": "Mme.Magloire", "group": 1 },
			{ "id": "CountessdeLo", "group": 1 },
			{ "id": "Geborand", "group": 1 },
			{ "id": "Champtercier", "group": 1 },
			{ "id": "Cravatte", "group": 1 },
			{ "id": "Count", "group": 1 },
			{ "id": "OldMan", "group": 1 },
			{ "id": "Labarre", "group": 2 },
			{ "id": "Valjean", "group": 2 },
			{ "id": "Marguerite", "group": 3 },
			{ "id": "Mme.deR", "group": 2 },
			{ "id": "Isabeau", "group": 2 },
			{ "id": "Gervais", "group": 2 },
			{ "id": "Tholomyes", "group": 3 },
			{ "id": "Listolier", "group": 3 },
			{ "id": "Fameuil", "group": 3 },
			{ "id": "Blacheville", "group": 3 },
			{ "id": "Favourite", "group": 3 },
			{ "id": "Dahlia", "group": 3 },
			{ "id": "Zephine", "group": 3 },
			{ "id": "Fantine", "group": 3 },
			{ "id": "Mme.Thenardier", "group": 4 },
			{ "id": "Thenardier", "group": 4 },
			{ "id": "Cosette", "group": 5 },
			{ "id": "Javert", "group": 4 },
			{ "id": "Fauchelevent", "group": 0 },
			{ "id": "Bamatabois", "group": 2 },
			{ "id": "Perpetue", "group": 3 },
			{ "id": "Simplice", "group": 2 },
			{ "id": "Scaufflaire", "group": 2 },
			{ "id": "Woman1", "group": 2 },
			{ "id": "Judge", "group": 2 },
			{ "id": "Champmathieu", "group": 2 },
			{ "id": "Brevet", "group": 2 },
			{ "id": "Chenildieu", "group": 2 },
			{ "id": "Cochepaille", "group": 2 },
			{ "id": "Pontmercy", "group": 4 },
			{ "id": "Boulatruelle", "group": 6 },
			{ "id": "Eponine", "group": 4 },
			{ "id": "Anzelma", "group": 4 },
			{ "id": "Woman2", "group": 5 },
			{ "id": "MotherInnocent", "group": 0 },
			{ "id": "Gribier", "group": 0 },
			{ "id": "Jondrette", "group": 7 },
			{ "id": "Mme.Burgon", "group": 7 },
			{ "id": "Gavroche", "group": 8 },
			{ "id": "Gillenormand", "group": 5 },
			{ "id": "Magnon", "group": 5 },
			{ "id": "Mlle.Gillenormand", "group": 5 },
			{ "id": "Mme.Pontmercy", "group": 5 },
			{ "id": "Mlle.Vaubois", "group": 5 },
			{ "id": "Lt.Gillenormand", "group": 5 },
			{ "id": "Marius", "group": 8 },
			{ "id": "BaronessT", "group": 5 },
			{ "id": "Mabeuf", "group": 8 },
			{ "id": "Enjolras", "group": 8 },
			{ "id": "Combeferre", "group": 8 },
			{ "id": "Prouvaire", "group": 8 },
			{ "id": "Feuilly", "group": 8 },
			{ "id": "Courfeyrac", "group": 8 },
			{ "id": "Bahorel", "group": 8 },
			{ "id": "Bossuet", "group": 8 },
			{ "id": "Joly", "group": 8 },
			{ "id": "Grantaire", "group": 8 },
			{ "id": "MotherPlutarch", "group": 9 },
			{ "id": "Gueulemer", "group": 4 },
			{ "id": "Babet", "group": 4 },
			{ "id": "Claquesous", "group": 4 },
			{ "id": "Montparnasse", "group": 4 },
			{ "id": "Toussaint", "group": 5 },
			{ "id": "Child1", "group": 10 },
			{ "id": "Child2", "group": 10 },
			{ "id": "Brujon", "group": 4 },
			{ "id": "Mme.Hucheloup", "group": 8 }
		],
		"links": [
			{ "source": "Napoleon", "target": "Myriel", "value": 1 },
			{ "source": "Mlle.Baptistine", "target": "Myriel", "value": 8 },
			{ "source": "Mme.Magloire", "target": "Myriel", "value": 10 },
			{ "source": "Mme.Magloire", "target": "Mlle.Baptistine", "value": 6 },
			{ "source": "CountessdeLo", "target": "Myriel", "value": 1 },
			{ "source": "Geborand", "target": "Myriel", "value": 1 },
			{ "source": "Champtercier", "target": "Myriel", "value": 1 },
			{ "source": "Cravatte", "target": "Myriel", "value": 1 },
			{ "source": "Count", "target": "Myriel", "value": 2 },
			{ "source": "OldMan", "target": "Myriel", "value": 1 },
			{ "source": "Valjean", "target": "Labarre", "value": 1 },
			{ "source": "Valjean", "target": "Mme.Magloire", "value": 3 },
			{ "source": "Valjean", "target": "Mlle.Baptistine", "value": 3 },
			{ "source": "Valjean", "target": "Myriel", "value": 5 },
			{ "source": "Marguerite", "target": "Valjean", "value": 1 },
			{ "source": "Mme.deR", "target": "Valjean", "value": 1 },
			{ "source": "Isabeau", "target": "Valjean", "value": 1 },
			{ "source": "Gervais", "target": "Valjean", "value": 1 },
			{ "source": "Listolier", "target": "Tholomyes", "value": 4 },
			{ "source": "Fameuil", "target": "Tholomyes", "value": 4 },
			{ "source": "Fameuil", "target": "Listolier", "value": 4 },
			{ "source": "Blacheville", "target": "Tholomyes", "value": 4 },
			{ "source": "Blacheville", "target": "Listolier", "value": 4 },
			{ "source": "Blacheville", "target": "Fameuil", "value": 4 },
			{ "source": "Favourite", "target": "Tholomyes", "value": 3 },
			{ "source": "Favourite", "target": "Listolier", "value": 3 },
			{ "source": "Favourite", "target": "Fameuil", "value": 3 },
			{ "source": "Favourite", "target": "Blacheville", "value": 4 },
			{ "source": "Dahlia", "target": "Tholomyes", "value": 3 },
			{ "source": "Dahlia", "target": "Listolier", "value": 3 },
			{ "source": "Dahlia", "target": "Fameuil", "value": 3 },
			{ "source": "Dahlia", "target": "Blacheville", "value": 3 },
			{ "source": "Dahlia", "target": "Favourite", "value": 5 },
			{ "source": "Zephine", "target": "Tholomyes", "value": 3 },
			{ "source": "Zephine", "target": "Listolier", "value": 3 },
			{ "source": "Zephine", "target": "Fameuil", "value": 3 },
			{ "source": "Zephine", "target": "Blacheville", "value": 3 },
			{ "source": "Zephine", "target": "Favourite", "value": 4 },
			{ "source": "Zephine", "target": "Dahlia", "value": 4 },
			{ "source": "Fantine", "target": "Tholomyes", "value": 3 },
			{ "source": "Fantine", "target": "Listolier", "value": 3 },
			{ "source": "Fantine", "target": "Fameuil", "value": 3 },
			{ "source": "Fantine", "target": "Blacheville", "value": 3 },
			{ "source": "Fantine", "target": "Favourite", "value": 4 },
			{ "source": "Fantine", "target": "Dahlia", "value": 4 },
			{ "source": "Fantine", "target": "Zephine", "value": 4 },
			{ "source": "Fantine", "target": "Marguerite", "value": 2 },
			{ "source": "Fantine", "target": "Valjean", "value": 9 },
			
		
		]
	}

	// d3.json("./miserables.json", function (error, graph) {
	// if (error) throw error;

	var link = svg.append("g")
		.attr("class", "links")
		.selectAll("line")
		.data(graph.links)
		.enter().append("line")
		.attr("stroke-width", function (d) { return Math.sqrt(d.value); });

	var node = svg.append("g")
		.attr("class", "nodes")
		.selectAll("g")
		.data(graph.nodes)
		.enter().append("g")

	var circles = node.append("circle")
		.attr("r", 5)
		.attr("fill", function (d) { return color(d.group); });

	// Create a drag handler and append it to the node object instead
	var drag_handler = d3.drag()
		.on("start", dragstarted)
		.on("drag", dragged)
		.on("end", dragended);

	drag_handler(node);

	var lables = node.append("text")
		.text(function (d) {
			return d.id;
		})
		.attr('x', 6)
		.attr('y', 3);

	node.append("title")
		.text(function (d) { return d.id; });

	simulation
		.nodes(graph.nodes)
		.on("tick", ticked);

	simulation.force("link")
		.links(graph.links);

	function ticked() {
		link
			.attr("x1", function (d) { return d.source.x; })
			.attr("y1", function (d) { return d.source.y; })
			.attr("x2", function (d) { return d.target.x; })
			.attr("y2", function (d) { return d.target.y; });

		node
			.attr("transform", function (d) {
				return "translate(" + d.x + "," + d.y + ")";
			})
	}

	function dragstarted(d) {
		if (!d3.event.active) simulation.alphaTarget(0.01).restart();
		d.fx = d.x;
		d.fy = d.y;
	}

	function dragged(d) {
		d.fx = d3.event.x;
		d.fy = d3.event.y;
	}

	function dragended(d) {
		if (!d3.event.active) simulation.alphaTarget(0);
		d.fx = null;
		d.fy = null;
	}

</script>